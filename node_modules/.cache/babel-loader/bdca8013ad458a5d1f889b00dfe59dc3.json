{"ast":null,"code":"import _slicedToArray from\"/home/costanza/Projects/copy-calc/react-calculator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{evaluate}from'mathjs';import Display from'./Display';var Calculator=function Calculator(){var _useState=useState('0'),_useState2=_slicedToArray(_useState,2),displayValue=_useState2[0],setDisplayValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),operator=_useState4[0],setOperator=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),waitingForOperand=_useState6[0],setWaitingForOperand=_useState6[1];var _useState7=useState('0'),_useState8=_slicedToArray(_useState7,2),firstOperand=_useState8[0],setFirstOperand=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),clearAll=_useState10[0],setClearAll=_useState10[1];var maxPrecision=16;var handleDigit=function handleDigit(newKeyValue){if(waitingForOperand){setDisplayValue(\"\".concat(newKeyValue));setWaitingForOperand(false);setClearAll(false);console.log(displayValue,waitingForOperand,clearAll);}else{var newDisplayValue=displayValue==='0'?\"\".concat(newKeyValue):\"\".concat(displayValue).concat(newKeyValue);//no leading zero\nsetDisplayValue(\"\".concat(newDisplayValue));setWaitingForOperand(false);setClearAll(false);}};var handleOperator=function handleOperator(newKeyValue){if(firstOperand==='0'||operator==null||waitingForOperand){setDisplayValue(\"\".concat(displayValue).concat(newKeyValue));setWaitingForOperand(true);setFirstOperand(displayValue);setOperator(newKeyValue);setClearAll(false);return;};var stringToEvaluate=\"\".concat(firstOperand).concat(operator).concat(displayValue);var res=stringToEvaluate.includes('=');if(res===true){setDisplayValue('0');setFirstOperand('0');setOperator(null);setWaitingForOperand(false);setClearAll(true);return;};console.log(stringToEvaluate);var newDisplayValue=\"\".concat(evaluate(stringToEvaluate));if(newDisplayValue===\"NaN\"){setDisplayValue('Error');};var newOperator=newKeyValue===\"=\"?null:newKeyValue;setDisplayValue(\"\".concat(newDisplayValue));setWaitingForOperand(true);setFirstOperand(\"\".concat(newDisplayValue));setOperator(newOperator);setClearAll(false);};var handlePoint=function handlePoint(newKeyValue){var needPoint=\"\".concat(displayValue).indexOf('.')===-1?true:false;if(waitingForOperand){setDisplayValue('0');setWaitingForOperand(false);setClearAll(false);return;};if(needPoint){setDisplayValue(\"\".concat(displayValue).concat(newKeyValue));setWaitingForOperand(false);setClearAll(false);};};// TODO: Fix Percentage.\nvar handlePercentage=function handlePercentage(){var newDisplayValue=parseFloat(displayValue).toPrecision(maxPrecision)/100;setDisplayValue(\"\".concat(newDisplayValue));setWaitingForOperand(false);setClearAll(false);};var handlePlusMinusToggle=function handlePlusMinusToggle(){var newDisplayValue=parseFloat(displayValue).toPrecision(maxPrecision)*-1;setDisplayValue(\"\".concat(newDisplayValue));setWaitingForOperand(false);setClearAll(false);};var handleClear=function handleClear(){console.log('clearAll',clearAll);if(clearAll){setDisplayValue('0');setFirstOperand('0');setOperator(null);setWaitingForOperand(false);setClearAll(true);}else{setDisplayValue('0');setClearAll(true);}};var handleKeyPress=function handleKeyPress(newKeyValue){/* Don't do anything, just write to the console. */console.log('Input Value: ',newKeyValue);};var handleFunctionKey=function handleFunctionKey(newKeyValue){switch(newKeyValue){case\"C\":handleClear();break;case\"±\":handlePlusMinusToggle();break;case\".\":handlePoint(newKeyValue);break;case\"%\":handlePercentage();break;default:handleKeyPress(newKeyValue);}};var handleClick=function handleClick(e){handleNewKey(\"\".concat(e.target.value));};var handleNewKey=function handleNewKey(newKeyValue){var digits=['0','1','2','3','4','5','6','7','8','9'];var operators=['/','*','-','+','='];var isDigit=digits.includes(newKeyValue);var isOperator=operators.includes(newKeyValue);if(isDigit){handleDigit(newKeyValue);}if(isOperator){handleOperator(newKeyValue);}else{handleFunctionKey(newKeyValue);}};console.log(displayValue);return/*#__PURE__*/React.createElement(\"div\",{className:\"calculator\"},/*#__PURE__*/React.createElement(Display,{value:displayValue,maxPrecision:maxPrecision}),/*#__PURE__*/React.createElement(\"div\",{className:\"calculator-keypad\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-keys\"},/*#__PURE__*/React.createElement(\"div\",{className:\"function-keys\"},/*#__PURE__*/React.createElement(\"button\",{id:\"key-clear\",value:\"C\",className:\"calculator-key key-clear\",onClick:handleClick},clearAll?'AC':'C'),/*#__PURE__*/React.createElement(\"button\",{id:\"key-sign\",value:\"\\xB1\",className:\"calculator-key key-sign\",onClick:handleClick},\"\\xB1\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-percent\",value:\"%\",className:\"calculator-key key-percent\",onClick:handleClick},\"%\")),/*#__PURE__*/React.createElement(\"div\",{className:\"digit-keys\"},/*#__PURE__*/React.createElement(\"button\",{id:\"key-0\",value:\"0\",className:\"calculator-key key-0\",onClick:handleClick},\"0\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-dot\",value:\".\",className:\"calculator-key key-dot\",onClick:handleClick},\"\\xB7\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-1\",value:\"1\",className:\"calculator-key key-1\",onClick:handleClick},\"1\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-2\",value:\"2\",className:\"calculator-key key-2\",onClick:handleClick},\"2\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-3\",value:\"3\",className:\"calculator-key key-3\",onClick:handleClick},\"3\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-4\",value:\"4\",className:\"calculator-key key-4\",onClick:handleClick},\"4\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-5\",value:\"5\",className:\"calculator-key key-5\",onClick:handleClick},\"5\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-6\",value:\"6\",className:\"calculator-key key-6\",onClick:handleClick},\"6\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-7\",value:\"7\",className:\"calculator-key key-7\",onClick:handleClick},\"7\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-8\",value:\"8\",className:\"calculator-key key-8\",onClick:handleClick},\"8\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-9\",value:\"9\",className:\"calculator-key key-9\",onClick:handleClick},\"9\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"operator-keys\"},/*#__PURE__*/React.createElement(\"button\",{id:\"key-divide\",value:\"/\",className:\"calculator-key calc-key key-divide\",onClick:handleClick},\"\\xF7\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-multiply\",value:\"*\",className:\"calculator-key calc-key key-multiply\",onClick:handleClick},\"\\xD7\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-subtract\",value:\"-\",className:\"calculator-key calc-key key-subtract\",onClick:handleClick},\"\\u2013\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-add\",value:\"+\",className:\"calculator-key calc-key key-add\",onClick:handleClick},\"+\"),/*#__PURE__*/React.createElement(\"button\",{id:\"key-equals\",value:\"=\",className:\"calculator-key calc-key key-equals\",onClick:handleClick},\"=\"))));};export default Calculator;","map":{"version":3,"sources":["/home/costanza/Projects/copy-calc/react-calculator/src/components/Calculator.js"],"names":["React","useState","evaluate","Display","Calculator","displayValue","setDisplayValue","operator","setOperator","waitingForOperand","setWaitingForOperand","firstOperand","setFirstOperand","clearAll","setClearAll","maxPrecision","handleDigit","newKeyValue","console","log","newDisplayValue","handleOperator","stringToEvaluate","res","includes","newOperator","handlePoint","needPoint","indexOf","handlePercentage","parseFloat","toPrecision","handlePlusMinusToggle","handleClear","handleKeyPress","handleFunctionKey","handleClick","e","handleNewKey","target","value","digits","operators","isDigit","isOperator"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { evaluate } from 'mathjs';\nimport Display from './Display';\n\nconst Calculator = () => {\n    const [displayValue, setDisplayValue] = useState('0');\n    const [operator, setOperator] = useState(null);\n    const [waitingForOperand, setWaitingForOperand] = useState(false);\n    const [firstOperand, setFirstOperand] = useState('0');\n    const [clearAll, setClearAll] = useState(true);\n    const maxPrecision = 16;\n\n    const handleDigit = (newKeyValue) => {\n        if (waitingForOperand) {\n            setDisplayValue(`${newKeyValue}`);\n            setWaitingForOperand(false);\n            setClearAll(false);\n            console.log(displayValue, waitingForOperand, clearAll)\n        } else {\n            const newDisplayValue = (displayValue === '0') ? `${newKeyValue}` : `${(displayValue)}${newKeyValue}`; //no leading zero\n            setDisplayValue(`${newDisplayValue}`);\n            setWaitingForOperand(false);\n            setClearAll(false);\n        }\n    }\n\n    const handleOperator = (newKeyValue) => {\n        if (firstOperand === '0' || operator == null || waitingForOperand) {\n            setDisplayValue(`${displayValue}${newKeyValue}`)\n            setWaitingForOperand(true);\n            setFirstOperand(displayValue);\n            setOperator(newKeyValue);\n            setClearAll(false);\n            return;\n        };\n\n        const stringToEvaluate = `${firstOperand}${operator}${displayValue}`;\n        const res = stringToEvaluate.includes('=');\n\n        if (res === true) {\n            setDisplayValue('0');\n            setFirstOperand('0');\n            setOperator(null);\n            setWaitingForOperand(false);\n            setClearAll(true);\n            return;\n        };\n\n        console.log(stringToEvaluate)\n\n        const newDisplayValue = `${evaluate(stringToEvaluate)}`;\n\n        if (newDisplayValue === \"NaN\") {\n            setDisplayValue('Error');\n        };\n\n        const newOperator = (newKeyValue === \"=\") ? null : newKeyValue;\n        setDisplayValue(`${newDisplayValue}`);\n        setWaitingForOperand(true);\n        setFirstOperand(`${newDisplayValue}`);\n        setOperator(newOperator);\n        setClearAll(false);\n    };\n\n    const handlePoint = (newKeyValue) => {\n        const needPoint = `${displayValue}`.indexOf('.') === -1 ? true : false;\n\n        if (waitingForOperand) {\n            setDisplayValue('0');\n            setWaitingForOperand(false);\n            setClearAll(false);\n            return;\n        };\n\n        if (needPoint) {\n            setDisplayValue(`${displayValue}${newKeyValue}`);\n            setWaitingForOperand(false);\n            setClearAll(false);\n        };\n    }\n\n    // TODO: Fix Percentage.\n    const handlePercentage = () => {\n        const newDisplayValue = parseFloat(displayValue).toPrecision(maxPrecision) / 100;\n\n        setDisplayValue(`${newDisplayValue}`);\n        setWaitingForOperand(false);\n        setClearAll(false);\n    }\n\n    const handlePlusMinusToggle = () => {\n        const newDisplayValue = parseFloat(displayValue).toPrecision(maxPrecision) * -1\n\n        setDisplayValue(`${newDisplayValue}`);\n        setWaitingForOperand(false);\n        setClearAll(false);\n    }\n\n    const handleClear = () => {\n        console.log('clearAll', clearAll);\n        if (clearAll) {\n            setDisplayValue('0');\n            setFirstOperand('0');\n            setOperator(null);\n            setWaitingForOperand(false);\n            setClearAll(true);\n        } else {\n            setDisplayValue('0');\n            setClearAll(true);\n        }\n    }\n\n\n    const handleKeyPress = (newKeyValue) => {\n        /* Don't do anything, just write to the console. */\n        console.log('Input Value: ', newKeyValue);\n    }\n\n    const handleFunctionKey = (newKeyValue) => {\n        switch (newKeyValue) {\n            case \"C\":\n                handleClear();\n                break;\n            case \"±\":\n                handlePlusMinusToggle();\n                break;\n            case \".\":\n                handlePoint(newKeyValue);\n                break;\n            case \"%\":\n                handlePercentage();\n                break;\n            default:\n                handleKeyPress(newKeyValue);\n        }\n    }\n\n\n    const handleClick = (e) => {\n        handleNewKey(`${e.target.value}`);\n    }\n\n    const handleNewKey = (newKeyValue) => {\n        const digits = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\n        const operators = ['/', '*', '-', '+', '='];\n\n        const isDigit = digits.includes(newKeyValue);\n        const isOperator = operators.includes(newKeyValue);\n\n        if (isDigit) {\n            handleDigit(newKeyValue);\n        }\n        if (isOperator) {\n            handleOperator(newKeyValue);\n        } else {\n            handleFunctionKey(newKeyValue);\n        }\n    }\n\n    console.log(displayValue)\n\n    return (\n        <div className=\"calculator\">\n            <Display value={displayValue} maxPrecision={maxPrecision} />\n\n            <div className=\"calculator-keypad\">\n                <div className=\"input-keys\">\n                    <div className=\"function-keys\">\n                        <button id=\"key-clear\" value=\"C\" className=\"calculator-key key-clear\" onClick={handleClick}>{clearAll ? 'AC' : 'C'}</button>\n                        <button id=\"key-sign\" value=\"±\" className=\"calculator-key key-sign\" onClick={handleClick}>&plusmn;</button>\n                        <button id=\"key-percent\" value=\"%\" className=\"calculator-key key-percent\" onClick={handleClick}>%</button>\n                    </div>\n\n                    <div className=\"digit-keys\">\n                        <button id=\"key-0\" value=\"0\" className=\"calculator-key key-0\" onClick={handleClick}>0</button>\n                        <button id=\"key-dot\" value=\".\" className=\"calculator-key key-dot\" onClick={handleClick}>&middot;</button>\n                        <button id=\"key-1\" value=\"1\" className=\"calculator-key key-1\" onClick={handleClick}>1</button>\n                        <button id=\"key-2\" value=\"2\" className=\"calculator-key key-2\" onClick={handleClick}>2</button>\n                        <button id=\"key-3\" value=\"3\" className=\"calculator-key key-3\" onClick={handleClick}>3</button>\n                        <button id=\"key-4\" value=\"4\" className=\"calculator-key key-4\" onClick={handleClick}>4</button>\n                        <button id=\"key-5\" value=\"5\" className=\"calculator-key key-5\" onClick={handleClick}>5</button>\n                        <button id=\"key-6\" value=\"6\" className=\"calculator-key key-6\" onClick={handleClick}>6</button>\n                        <button id=\"key-7\" value=\"7\" className=\"calculator-key key-7\" onClick={handleClick}>7</button>\n                        <button id=\"key-8\" value=\"8\" className=\"calculator-key key-8\" onClick={handleClick}>8</button>\n                        <button id=\"key-9\" value=\"9\" className=\"calculator-key key-9\" onClick={handleClick}>9</button>\n                    </div>\n                </div>\n\n                <div className=\"operator-keys\">\n                    <button id=\"key-divide\" value=\"/\" className=\"calculator-key calc-key key-divide\" onClick={handleClick}>&divide;</button>\n                    <button id=\"key-multiply\" value=\"*\" className=\"calculator-key calc-key key-multiply\" onClick={handleClick}>&times;</button>\n                    <button id=\"key-subtract\" value=\"-\" className=\"calculator-key calc-key key-subtract\" onClick={handleClick}>&ndash;</button>\n                    <button id=\"key-add\" value=\"+\" className=\"calculator-key calc-key key-add\" onClick={handleClick}>+</button>\n                    <button id=\"key-equals\" value=\"=\" className=\"calculator-key calc-key key-equals\" onClick={handleClick}>=</button>\n                </div>\n            </div>\n        </div>\n    )\n\n}\n\nexport default Calculator;"]},"metadata":{},"sourceType":"module"}